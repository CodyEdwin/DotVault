<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane fx:id="mainBorderPane" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.dotvault.controller.MainController">
    
    <!-- Top Header -->
    <top>
        <VBox spacing="0">
            <!-- Menu Bar -->
            <MenuBar>
                <Menu text="File">
                    <MenuItem text="New Backup" accelerator="Shortcut+N"/>
                    <MenuItem text="Restore from Backup"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Settings" accelerator="Shortcut+S"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Exit" accelerator="Shortcut+Q"/>
                </Menu>
                <Menu text="Edit">
                    <MenuItem text="Select All" accelerator="Shortcut+A"/>
                    <MenuItem text="Deselect All" accelerator="Shortcut+D"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Refresh" accelerator="F5"/>
                </Menu>
                <Menu text="View">
                    <CheckMenuItem text="Dark Mode" selected="true"/>
                    <SeparatorMenuItem/>
                    <RadioMenuItem text="Tree View" selected="true"/>
                    <RadioMenuItem text="List View"/>
                </Menu>
                <Menu text="Profiles">
                    <MenuItem text="Save Current Selection"/>
                    <MenuItem text="Load Profile"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Manage Profiles"/>
                </Menu>
                <Menu text="Help">
                    <MenuItem text="About"/>
                    <MenuItem text="Documentation"/>
                </Menu>
            </MenuBar>
            
            <!-- Toolbar -->
            <ToolBar>
                <Button text="Backup" mnemonicParsing="false" onAction="#onBackup" styleClass="primary-button"/>
                <Button text="Restore" mnemonicParsing="false" onAction="#onRestore" styleClass="secondary-button"/>
                <Separator orientation="VERTICAL"/>
                <Button text="Select All" mnemonicParsing="false" onAction="#onSelectAll" styleClass="toolbar-button"/>
                <Button text="Deselect All" mnemonicParsing="false" onAction="#onDeselectAll" styleClass="toolbar-button"/>
                <Separator orientation="VERTICAL"/>
                <Button text="Refresh" mnemonicParsing="false" onAction="#onRefresh" styleClass="toolbar-button"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Backup Path:"/>
                <TextField fx:id="backupPathField" promptText="Select backup directory" prefWidth="250"/>
                <Button fx:id="backupPathBrowseButton" text="Browse" mnemonicParsing="false"/>
            </ToolBar>
        </VBox>
    </top>
    
    <!-- Center Content -->
    <center>
        <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE">
            
            <!-- Backup Tab -->
            <Tab fx:id="backupTab" text="Backup">
                <SplitPane dividerPositions="0.25">
                    <!-- Left Sidebar - Categories -->
                    <VBox spacing="5" styleClass="sidebar">
                        <Label text="Categories" styleClass="sidebar-title"/>
                        <ListView fx:id="categoryListView" styleClass="category-list"/>
                    </VBox>
                    
                    <!-- Right Content - Config Tree -->
                    <VBox spacing="5">
                        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-bar">
                            <Label text="Filter:"/>
                            <TextField promptText="Search configurations..." prefWidth="200"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="selectedCountLabel" text="0 selected"/>
                            <Label fx:id="totalSizeLabel" text="0 B"/>
                        </HBox>
                        
                        <TreeView fx:id="configTreeView" VBox.vgrow="ALWAYS" styleClass="config-tree"/>
                    </VBox>
                </SplitPane>
            </Tab>
            
            <!-- Restore Tab -->
            <Tab fx:id="restoreTab" text="Restore">
                <VBox spacing="20" styleClass="restore-panel">
                    <VBox spacing="10">
                        <Label text="Select Backup to Restore" styleClass="section-title"/>
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="restorePathField" promptText="Select backup directory or archive" prefWidth="400"/>
                            <Button fx:id="restorePathBrowseButton" text="Browse" mnemonicParsing="false"/>
                            <Button text="Load Backup" styleClass="secondary-button"/>
                        </HBox>
                    </VBox>
                    
                    <Separator/>
                    
                    <VBox spacing="10">
                        <Label text="Restore Location" styleClass="section-title"/>
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <RadioButton text="Original Locations" selected="true"/>
                            <RadioButton text="Custom Location"/>
                        </HBox>
                    </VBox>
                    
                    <Separator/>
                    
                    <VBox spacing="10">
                        <Label text="Restore Options" styleClass="section-title"/>
                        <CheckBox text="Preserve file permissions" selected="true"/>
                        <CheckBox text="Keep existing files (don't overwrite)"/>
                        <CheckBox text="Create backups before overwriting"/>
                    </VBox>
                    
                    <Region VBox.vgrow="ALWAYS"/>
                    
                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <Button fx:id="restoreButton" text="Start Restore" mnemonicParsing="false" styleClass="primary-button"/>
                    </HBox>
                </VBox>
            </Tab>
            
            <!-- Profiles Tab -->
            <Tab fx:id="profilesTab" text="Profiles">
                <fx:include source="profile.fxml"/>
            </Tab>
            
            <!-- Settings Tab -->
            <Tab fx:id="settingsTab" text="Settings">
                <fx:include source="settings.fxml"/>
            </Tab>
            
        </TabPane>
    </center>
    
    <!-- Bottom Status Bar -->
    <bottom>
        <VBox spacing="0">
            <!-- Progress Bar -->
            <ProgressBar fx:id="backupProgressBar" progress="0.0" prefHeight="5" styleClass="progress-bar"/>
            
            <!-- Status Bar -->
            <HBox styleClass="status-bar">
                <Label fx:id="statusLabel" text="Ready" HBox.hgrow="ALWAYS"/>
                <ProgressIndicator fx:id="progressIndicator" visible="false" prefWidth="20" prefHeight="20"/>
                <Label text="DotVault v1.0.0"/>
            </HBox>
        </VBox>
    </bottom>
    
</BorderPane>
